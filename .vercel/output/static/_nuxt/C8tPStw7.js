import{f as a,l as s,u as e,h as t,g as o,c as l,k as r,a as u,b as n,w as i,n as c,e as d,m as g,p,o as f,d as y}from"./BfbKYXm_.js";import{_ as m}from"./CGCiTkgm.js";import{u as h}from"./CTOCC48s.js";import"./D1HCBIMP.js";const v={key:0},b={key:1,class:"container mx-auto py-8 space-y-4"},w={key:2},k=a({__name:"[slug]",async setup(a){let k,$;const _=s(),j=e().public.payloadApiFullUrl,A=Array.isArray(_.params.slug)?_.params.slug.join("/"):_.params.slug,x=t((()=>`/web-pages?where[slug][equals]=${A}&depth=2&limit=1`)),{data:C,pending:L,error:P,refresh:U}=([k,$]=o((async()=>g(`page-${A}`,(async()=>{if(!j)throw console.error(`[...slug].vue: Payload API URL is not configured for slug: ${A}`),p({statusCode:500,statusMessage:"API URL not configured"});try{return await $fetch(x.value,{baseURL:j})}catch(a){throw console.error(`Error fetching page data for slug ${A} from ${j}${x.value}:`,a),p({statusCode:a.statusCode||500,statusMessage:a.statusMessage||"Failed to fetch page data"})}}),{watch:[x]}))),k=await k,$(),k),M=t((()=>C.value?.docs?.[0])),R=t((()=>{const a=a=>({...a,id:null===a.id?void 0:a.id});return"get-in-touch"===A&&M.value?.layout?M.value.layout.filter((a=>"scheduleCallSection"===a.blockType)).map(a):M.value?.layout?.map(a)||[]}));h(M.value,"website");const F=t((()=>"about"===A?"page-about":""));return(a,s)=>{const e=d,t=m;return f(),l("div",{class:c(["page-slug",r(F)])},[r(L)?(f(),l("div",v," Loading... ")):r(P)||!r(M)?(f(),l("div",b,[s[1]||(s[1]=u("h1",{class:"text-xl"},"404: Page not found",-1)),s[2]||(s[2]=u("p",null,"Sorry, we couldn't find the page you were looking for.",-1)),n(e,{to:"/",class:"underline block"},{default:i((()=>s[0]||(s[0]=[y("Go back home")]))),_:1,__:[0]})])):(f(),l("div",w,[n(t,{blocks:r(R)},null,8,["blocks"])]))],2)}}});export{k as default};
