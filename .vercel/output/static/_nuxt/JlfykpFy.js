import{f as e,u as t,g as a,h as r,r as s,p as i,j as o,w as l,q as n,s as d,v as u,o as m,c as p,k as c,a as g,x as b,b as v,y as x,z as h,t as k}from"./C0ajcZnf.js";import{u as y}from"./BHEbfMk0.js";import{u as f,_ as w}from"./C70uoV0X.js";import{W}from"./DOtyZyZM.js";import"./cETb8_vR.js";import"./CyJ4Y1vI.js";const j={key:0,class:"py-12 text-center"},S={key:1},I={class:"max-w-3xl mx-auto px-6 pt-8"},L={class:"flex items-center justify-between"},$={class:"flex items-center gap-2"},q={class:"max-w-3xl mx-auto h-40 md:h-48 relative overflow-visible"},z=["src"],U={class:"text-brand-900 dark:text-brand-100 tracking-tight text-7xl leading-[86px] max-md:text-6xl max-sm:text-4xl max-sm:leading-10 mt-8 mb-10 border-b border-brand-50 dark:border-primary-700 pb-4"},P={class:"prose prose-slate max-w-none dark:prose-invert"},R={key:0,class:"mt-8 pt-4 border-t border-brand-50 dark:border-primary-700 text-sm text-brand-primary dark:text-primary-300"},_=e({__name:"index",async setup(e){let _,A;n(),d();const B=t().public.payloadApiFullUrl,{data:C,pending:E,error:F,refresh:H}=([_,A]=a((()=>y("/wiki-pages?where[isSectionHomepage][equals]=true&limit=1&depth=2",{baseURL:B,key:"wiki-homepage",transform:async e=>B?e&&e.docs?e:(console.warn("Wiki Index: No docs found in homepage response or response is null."),{docs:[]}):(console.error("Wiki Index: Payload API URL is not configured."),{docs:[]}),onRequestError({request:e,options:t,error:a}){console.error(`Wiki Index: Error fetching homepage data from ${t.baseURL}${e}:`,a)}},"$kBY2FkyFIm"))),_=await _,A(),_),M=r((()=>C.value?.docs?.[0])),{getMediaUrl:N}=u(),D=r((()=>{const e=M.value?.backgroundSettings,t=e?.backgroundImage;return"object"==typeof t&&null!==t&&"url"in t&&t.url?t.url.startsWith("http://")||t.url.startsWith("https://")?t.url:N(t):"string"==typeof t?t.startsWith("http://")||t.startsWith("https://")?t:N(t):void 0})),G=r((()=>M.value?.backgroundSettings?.backgroundOverlay)),O=r((()=>{const e=G.value;return e&&/^(primary-(25|50|100|200|300|400|500|600|700|800|900|950)|sand|pink-light|coral-light|pink-mid|purple-light|blue-light|aqua-light|green-light|light-green|grass-light|light-grey|navy-dark)$/.test(e)?`bg-${e}`:"bg-gradient-to-r from-indigo-500 to-purple-600"})),T=r((()=>{const e=G.value,t=e&&/^primary-(25|50|100|200|300|400|500|600|700|800|900|950)$/.test(e);return!!D.value||t})),Y=r((()=>(e=>{if(!e)return null;try{return new Date(e).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"})}catch(t){return console.error("Error formatting date:",t),null}})(M.value?.updatedAt)));f(M.value,"article");const J=s(!1),K=()=>{J.value=!J.value},Q=s(!1),V=()=>{console.log("toggleLeftSidebar"),Q.value=!Q.value};return i((()=>{window.innerWidth>=1024&&(Q.value=!0)})),(e,t)=>{const a=x;return m(),o(W,{"nav-parent-id":null,"nav-title":"Wiki Menu","toc-items":[],"is-right-sidebar-open":J.value,"toggle-right-sidebar":K,"is-left-sidebar-open":Q.value,onCloseLeftSidebar:t[0]||(t[0]=e=>Q.value=!1)},{default:l((()=>[c(F)||!M.value?(m(),p("div",j,t[1]||(t[1]=[g("div",{class:"w-24 h-24 mx-auto mb-6 text-4xl"},"ðŸ“–",-1),g("h1",{class:"text-3xl font-bold text-gray-700 mb-3"}," Wiki Homepage Not Set ",-1),g("p",{class:"mt-3 text-gray-500 max-w-md mx-auto mb-6"}," No page has been designated as the Wiki homepage in the CMS. Please set one in the 'wiki-pages' collection. ",-1)]))):(m(),p("div",S,[g("div",I,[g("div",L,[g("div",$,[g("button",{onClick:V,class:"p-1 rounded hover:bg-gray-100 text-gray-400 hover:text-gray-600 mr-1 lg:hidden","aria-label":"Toggle navigation"},[v(a,{name:"ph:list",size:"16"})]),t[2]||(t[2]=g("div",{class:"text-sm text-brand-primary dark:text-primary-300"}," Wiki Home ",-1))])])]),T.value?(m(),p("div",{key:0,class:h(["mt-5 mb-16 mx-5 rounded-lg relative overflow-visible",O.value])},[g("div",q,[D.value?(m(),p("img",{key:0,src:D.value,alt:"Page Icon",class:"absolute left-8 -bottom-20 h-72 w-72 object-contain z-10"},null,8,z)):(m(),o(a,{key:1,name:"ph:book-open-duotone",size:"288",class:"absolute left-8 -bottom-20 text-white z-10"}))])],2)):b("",!0),g("div",{class:h(["max-w-3xl mx-auto px-6 pb-8",{"pt-8":!T.value}])},[g("h1",U,k(M.value.title),1),g("div",P,[v(w,{blocks:M.value.pageBuilder||[]},null,8,["blocks"])]),Y.value?(m(),p("div",R," Last updated: "+k(Y.value),1)):b("",!0)],2)]))])),_:1},8,["is-right-sidebar-open","is-left-sidebar-open"])}}});export{_ as default};
