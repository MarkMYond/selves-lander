import{f as e,u as t,g as a,h as r,s,v as o,j as l,w as n,x as i,y as d,z as u,o as m,c,k as p,a as g,r as b,b as x,A as v,n as h,t as y}from"./BfbKYXm_.js";import{u as f}from"./DAcegZ-V.js";import{_ as k}from"./CGCiTkgm.js";import{R as w}from"./CPfQwTk-.js";import{u as R}from"./CTOCC48s.js";import"./D1HCBIMP.js";const j={key:0,class:"py-12 text-center"},S={key:1},L={class:"max-w-3xl mx-auto px-6 pt-8"},I={class:"flex items-center gap-2"},N={class:"max-w-3xl mx-auto h-40 md:h-48 relative overflow-visible"},$=["src"],A={class:"text-brandNeutral-04 dark:text-brand-100 tracking-tight text-7xl leading-[86px] max-md:text-6xl max-sm:text-4xl max-sm:leading-10 mt-8 mb-10 border-b border-brand-50 dark:border-primary-700 pb-4"},U={class:"prose prose-slate max-w-none dark:prose-invert"},W={key:0,class:"mt-8 pt-4 border-t border-brand-50 dark:border-primary-700 text-sm text-brand-primary dark:text-primary-300"},q=e({__name:"index",async setup(e){let q,z;i(),d();const C=t().public.payloadApiFullUrl,{data:M,pending:O,error:P,refresh:_}=([q,z]=a((()=>f("/registry-pages?where[isSectionHomepage][equals]=true&limit=1&depth=2",{baseURL:C,key:"registry-homepage",transform:async e=>C?e&&e.docs?e:(console.warn("Registry Index: No docs found in homepage response or response is null."),{docs:[]}):(console.error("Registry Index: Payload API URL is not configured."),{docs:[]}),onRequestError({request:e,options:t,error:a}){console.error(`Registry Index: Error fetching homepage data from ${t.baseURL}${e}:`,a)}},"$ACJMKopOyy"))),q=await q,z(),q),E=r((()=>M.value?.docs?.[0])),{getMediaUrl:H}=u(),B=r((()=>{const e=E.value?.backgroundSettings,t=e?.backgroundImage;return"object"==typeof t&&null!==t&&"url"in t&&t.url?t.url.startsWith("http://")||t.url.startsWith("https://")?t.url:H(t):"string"==typeof t?t.startsWith("http://")||t.startsWith("https://")?t:H(t):void 0})),D=r((()=>E.value?.backgroundSettings?.backgroundOverlay)),T=r((()=>{const e=D.value;return e&&/^(brandTheme-(01|02|03|04)|brandNeutral-(01|02|03|04)|light-grey)$/.test(e)?`bg-${e}`:"bg-brandNeutral-01"})),F=r((()=>{const e=D.value,t=e&&/^primary-(25|50|100|200|300|400|500|600|700|800|900|950)$/.test(e);return!!B.value||t})),G=r((()=>(e=>{if(!e)return null;try{return new Date(e).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"})}catch(t){return console.error("Error formatting date:",t),null}})(E.value?.updatedAt)));R(E.value,"article"),s(!1);const J=s(!1);return o((()=>{window.innerWidth>=1024&&(J.value=!0)})),(e,t)=>{const a=v;return m(),l(w,{"nav-parent-id":null,"nav-title":"Registry Menu",isLeftSidebarOpen:J.value,onCloseLeftSidebar:t[1]||(t[1]=e=>J.value=!1)},{default:n((()=>[p(P)||!E.value?(m(),c("div",j,t[2]||(t[2]=[g("div",{class:"w-24 h-24 mx-auto mb-6 text-4xl"},"ðŸ“š",-1),g("h1",{class:"text-3xl font-bold text-gray-700 mb-3"}," Registry Homepage Not Set ",-1),g("p",{class:"mt-3 text-gray-500 max-w-md mx-auto mb-6"}," No page has been designated as the Registry homepage in the CMS. Please set one in the 'registry-pages' collection. ",-1)]))):(m(),c("div",S,[g("div",L,[g("div",I,[g("button",{onClick:t[0]||(t[0]=e=>J.value=!0),class:"p-1 rounded hover:bg-gray-100 text-gray-400 hover:text-gray-600 mr-1 lg:hidden","aria-label":"Toggle navigation"},[x(a,{name:"ph:list",size:"16"})]),t[3]||(t[3]=g("div",{class:"text-sm text-brand-primary dark:text-primary-300"}," Registry Home ",-1))])]),F.value?(m(),c("div",{key:0,class:h(["mt-5 mb-16 mx-5 rounded-lg relative overflow-visible",T.value])},[g("div",N,[B.value?(m(),c("img",{key:0,src:B.value,alt:"Page Icon",class:"absolute left-8 -bottom-10 h-52 w-52 md:h-60 md:w-60 object-contain z-10"},null,8,$)):(m(),l(a,{key:1,name:"ph:squares-four",class:"absolute left-8 -bottom-10 text-white z-10 h-52 w-52 md:h-60 md:w-60"}))])],2)):b("",!0),g("div",{class:h(["max-w-3xl mx-auto px-6 pb-8",{"pt-8":!F.value}])},[g("h1",A,y(E.value.title),1),g("div",U,[x(k,{blocks:E.value.pageBuilder||[]},null,8,["blocks"])]),G.value?(m(),c("div",W," Last updated: "+y(G.value),1)):b("",!0)],2)]))])),_:1},8,["isLeftSidebarOpen"])}}});export{q as default};
