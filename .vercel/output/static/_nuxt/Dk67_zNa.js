import{f as e,u as t,g as a,h as r,r as s,p as o,j as l,w as i,q as n,s as d,v as u,o as m,c as g,k as p,a as c,x,b,y as v,z as h,t as y}from"./C0ajcZnf.js";import{u as f}from"./BHEbfMk0.js";import{u as k,_ as w}from"./C70uoV0X.js";import{R}from"./xlVzH5Ss.js";import"./cETb8_vR.js";import"./CyJ4Y1vI.js";const j={key:0,class:"py-12 text-center"},S={key:1},L={class:"max-w-3xl mx-auto px-6 pt-8"},q={class:"flex items-center gap-2"},I={class:"max-w-3xl mx-auto h-40 md:h-48 relative overflow-visible"},$=["src"],z={class:"text-brand-900 dark:text-brand-100 tracking-tight text-7xl leading-[86px] max-md:text-6xl max-sm:text-4xl max-sm:leading-10 mt-8 mb-10 border-b border-brand-50 dark:border-primary-700 pb-4"},U={class:"prose prose-slate max-w-none dark:prose-invert"},W={key:0,class:"mt-8 pt-4 border-t border-brand-50 dark:border-primary-700 text-sm text-brand-primary dark:text-primary-300"},A=e({__name:"index",async setup(e){let A,C;n(),d();const M=t().public.payloadApiFullUrl,{data:O,pending:P,error:_,refresh:E}=([A,C]=a((()=>f("/registry-pages?where[isSectionHomepage][equals]=true&limit=1&depth=2",{baseURL:M,key:"registry-homepage",transform:async e=>M?e&&e.docs?e:(console.warn("Registry Index: No docs found in homepage response or response is null."),{docs:[]}):(console.error("Registry Index: Payload API URL is not configured."),{docs:[]}),onRequestError({request:e,options:t,error:a}){console.error(`Registry Index: Error fetching homepage data from ${t.baseURL}${e}:`,a)}},"$ACJMKopOyy"))),A=await A,C(),A),H=r((()=>O.value?.docs?.[0])),{getMediaUrl:N}=u(),B=r((()=>{const e=H.value?.backgroundSettings,t=e?.backgroundImage;return"object"==typeof t&&null!==t&&"url"in t&&t.url?t.url.startsWith("http://")||t.url.startsWith("https://")?t.url:N(t):"string"==typeof t?t.startsWith("http://")||t.startsWith("https://")?t:N(t):void 0})),D=r((()=>H.value?.backgroundSettings?.backgroundOverlay)),F=r((()=>{const e=D.value;return e&&/^(primary-(25|50|100|200|300|400|500|600|700|800|900|950)|sand|pink-light|coral-light|pink-mid|purple-light|blue-light|aqua-light|green-light|light-green|grass-light|light-grey|navy-dark)$/.test(e)?`bg-${e}`:"bg-gradient-to-r from-indigo-500 to-purple-600"})),G=r((()=>{const e=D.value,t=e&&/^primary-(25|50|100|200|300|400|500|600|700|800|900|950)$/.test(e);return!!B.value||t})),J=r((()=>(e=>{if(!e)return null;try{return new Date(e).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"})}catch(t){return console.error("Error formatting date:",t),null}})(H.value?.updatedAt)));k(H.value,"article"),s(!1);const K=s(!1);return o((()=>{window.innerWidth>=1024&&(K.value=!0)})),(e,t)=>{const a=v;return m(),l(R,{"nav-parent-id":null,"nav-title":"Registry Menu",isLeftSidebarOpen:K.value,onCloseLeftSidebar:t[1]||(t[1]=e=>K.value=!1)},{default:i((()=>[p(_)||!H.value?(m(),g("div",j,t[2]||(t[2]=[c("div",{class:"w-24 h-24 mx-auto mb-6 text-4xl"},"ðŸ“š",-1),c("h1",{class:"text-3xl font-bold text-gray-700 mb-3"}," Registry Homepage Not Set ",-1),c("p",{class:"mt-3 text-gray-500 max-w-md mx-auto mb-6"}," No page has been designated as the Registry homepage in the CMS. Please set one in the 'registry-pages' collection. ",-1)]))):(m(),g("div",S,[c("div",L,[c("div",q,[c("button",{onClick:t[0]||(t[0]=e=>K.value=!0),class:"p-1 rounded hover:bg-gray-100 text-gray-400 hover:text-gray-600 mr-1 lg:hidden","aria-label":"Toggle navigation"},[b(a,{name:"ph:list",size:"16"})]),t[3]||(t[3]=c("div",{class:"text-sm text-brand-primary dark:text-primary-300"}," Registry Home ",-1))])]),G.value?(m(),g("div",{key:0,class:h(["mt-5 mb-16 mx-5 rounded-lg relative overflow-visible",F.value])},[c("div",I,[B.value?(m(),g("img",{key:0,src:B.value,alt:"Page Icon",class:"absolute left-8 -bottom-20 h-72 w-72 object-contain z-10"},null,8,$)):(m(),l(a,{key:1,name:"ph:squares-four",size:"288",class:"absolute left-8 -bottom-20 text-white z-10"}))])],2)):x("",!0),c("div",{class:h(["max-w-3xl mx-auto px-6 pb-8",{"pt-8":!G.value}])},[c("h1",z,y(H.value.title),1),c("div",U,[b(w,{blocks:H.value.pageBuilder||[]},null,8,["blocks"])]),J.value?(m(),g("div",W," Last updated: "+y(J.value),1)):x("",!0)],2)]))])),_:1},8,["isLeftSidebarOpen"])}}});export{A as default};
