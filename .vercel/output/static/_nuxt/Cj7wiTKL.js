import{f as e,u as t,g as a,h as r,s,v as o,j as l,w as i,x as n,y as d,z as u,o as m,c,k as p,a as g,r as b,b as v,A as x,n as h,t as k}from"./BfbKYXm_.js";import{u as y}from"./DAcegZ-V.js";import{_ as f}from"./CGCiTkgm.js";import{W as w}from"./B0JVQ9oC.js";import{u as W}from"./CTOCC48s.js";import"./D1HCBIMP.js";const j={key:0,class:"py-12 text-center"},S={key:1},I={class:"max-w-3xl mx-auto px-6 pt-8"},L={class:"flex items-center justify-between"},$={class:"flex items-center gap-2"},N={class:"max-w-3xl mx-auto h-40 md:h-48 relative overflow-visible"},U=["src"],z={class:"text-brandNeutral-04 dark:text-brand-100 tracking-tight text-7xl leading-[86px] max-md:text-6xl max-sm:text-4xl max-sm:leading-10 mt-8 mb-10 border-b border-brand-50 dark:border-primary-700 pb-4"},A={class:"prose prose-slate max-w-none dark:prose-invert"},P={key:0,class:"mt-8 pt-4 border-t border-brand-50 dark:border-primary-700 text-sm text-brand-primary dark:text-primary-300"},R=e({__name:"index",async setup(e){let R,_;n(),d();const q=t().public.payloadApiFullUrl,{data:B,pending:C,error:E,refresh:F}=([R,_]=a((()=>y("/wiki-pages?where[isSectionHomepage][equals]=true&limit=1&depth=2",{baseURL:q,key:"wiki-homepage",transform:async e=>q?e&&e.docs?e:(console.warn("Wiki Index: No docs found in homepage response or response is null."),{docs:[]}):(console.error("Wiki Index: Payload API URL is not configured."),{docs:[]}),onRequestError({request:e,options:t,error:a}){console.error(`Wiki Index: Error fetching homepage data from ${t.baseURL}${e}:`,a)}},"$kBY2FkyFIm"))),R=await R,_(),R),H=r((()=>B.value?.docs?.[0])),{getMediaUrl:M}=u(),D=r((()=>{const e=H.value?.backgroundSettings,t=e?.backgroundImage;return"object"==typeof t&&null!==t&&"url"in t&&t.url?t.url.startsWith("http://")||t.url.startsWith("https://")?t.url:M(t):"string"==typeof t?t.startsWith("http://")||t.startsWith("https://")?t:M(t):void 0})),T=r((()=>H.value?.backgroundSettings?.backgroundOverlay)),G=r((()=>{const e=T.value;return e&&/^(brandTheme-(01|02|03|04)|brandNeutral-(01|02|03|04)|light-grey)$/.test(e)?`bg-${e}`:"bg-gradient-to-r from-indigo-500 to-purple-600"})),O=r((()=>{const e=T.value,t=e&&/^primary-(25|50|100|200|300|400|500|600|700|800|900|950)$/.test(e);return!!D.value||t})),Y=r((()=>(e=>{if(!e)return null;try{return new Date(e).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"})}catch(t){return console.error("Error formatting date:",t),null}})(H.value?.updatedAt)));W(H.value,"article");const J=s(!1),K=()=>{J.value=!J.value},Q=s(!1),V=()=>{console.log("toggleLeftSidebar"),Q.value=!Q.value};return o((()=>{window.innerWidth>=1024&&(Q.value=!0)})),(e,t)=>{const a=x;return m(),l(w,{"nav-parent-id":null,"nav-title":"Wiki Menu","toc-items":[],"is-right-sidebar-open":J.value,"toggle-right-sidebar":K,"is-left-sidebar-open":Q.value,onCloseLeftSidebar:t[0]||(t[0]=e=>Q.value=!1)},{default:i((()=>[p(E)||!H.value?(m(),c("div",j,t[1]||(t[1]=[g("div",{class:"w-24 h-24 mx-auto mb-6 text-4xl"},"ðŸ“–",-1),g("h1",{class:"text-3xl font-bold text-gray-700 mb-3"}," Wiki Homepage Not Set ",-1),g("p",{class:"mt-3 text-gray-500 max-w-md mx-auto mb-6"}," No page has been designated as the Wiki homepage in the CMS. Please set one in the 'wiki-pages' collection. ",-1)]))):(m(),c("div",S,[g("div",I,[g("div",L,[g("div",$,[g("button",{onClick:V,class:"p-1 rounded hover:bg-gray-100 text-gray-400 hover:text-gray-600 mr-1 lg:hidden","aria-label":"Toggle navigation"},[v(a,{name:"ph:list",size:"16"})]),t[2]||(t[2]=g("div",{class:"text-sm text-brand-primary dark:text-primary-300"}," Wiki Home ",-1))])])]),O.value?(m(),c("div",{key:0,class:h(["mt-5 mb-16 mx-5 rounded-lg relative overflow-visible",G.value])},[g("div",N,[D.value?(m(),c("img",{key:0,src:D.value,alt:"Page Icon",class:"absolute left-8 -bottom-10 h-52 w-52 md:h-60 md:w-60 object-contain z-10"},null,8,U)):(m(),l(a,{key:1,name:"ph:book-open-duotone",class:"absolute left-8 -bottom-10 text-white z-10 h-52 w-52 md:h-60 md:w-60"}))])],2)):b("",!0),g("div",{class:h(["max-w-3xl mx-auto px-6 pb-8",{"pt-8":!O.value}])},[g("h1",z,k(H.value.title),1),g("div",A,[v(f,{blocks:H.value.pageBuilder||[]},null,8,["blocks"])]),Y.value?(m(),c("div",P," Last updated: "+k(Y.value),1)):b("",!0)],2)]))])),_:1},8,["is-right-sidebar-open","is-left-sidebar-open"])}}});export{R as default};
