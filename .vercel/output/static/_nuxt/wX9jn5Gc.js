import{f as a,l as s,u as e,h as t,g as o,c as l,k as r,a as u,b as n,w as c,e as i,m as d,n as g,o as p,d as f}from"./C0ajcZnf.js";import{u as y,_ as h}from"./C70uoV0X.js";import"./cETb8_vR.js";const m={class:"page-slug"},v={key:0},b={key:1,class:"container mx-auto py-8 space-y-4"},w={key:2},k=a({__name:"[slug]",async setup(a){let k,$;const A=s(),j=e().public.payloadApiFullUrl,x=Array.isArray(A.params.slug)?A.params.slug.join("/"):A.params.slug,C=t((()=>`/web-pages?where[slug][equals]=${x}&depth=2&limit=1`)),{data:L,pending:P,error:U,refresh:_}=([k,$]=o((async()=>d(`page-${x}`,(async()=>{if(!j)throw console.error(`[...slug].vue: Payload API URL is not configured for slug: ${x}`),g({statusCode:500,statusMessage:"API URL not configured"});try{return await $fetch(C.value,{baseURL:j})}catch(a){throw console.error(`Error fetching page data for slug ${x} from ${j}${C.value}:`,a),g({statusCode:a.statusCode||500,statusMessage:a.statusMessage||"Failed to fetch page data"})}}),{watch:[C]}))),k=await k,$(),k),M=t((()=>L.value?.docs?.[0])),R=t((()=>{const a=a=>({...a,id:null===a.id?void 0:a.id});return"get-in-touch"===x&&M.value?.layout?M.value.layout.filter((a=>"scheduleCallSection"===a.blockType)).map(a):M.value?.layout?.map(a)||[]}));return y(M.value,"website"),(a,s)=>{const e=i,t=h;return p(),l("div",m,[r(P)?(p(),l("div",v," Loading... ")):r(U)||!r(M)?(p(),l("div",b,[s[1]||(s[1]=u("h1",{class:"text-xl"},"404: Page not found",-1)),s[2]||(s[2]=u("p",null,"Sorry, we couldn't find the page you were looking for.",-1)),n(e,{to:"/",class:"underline block"},{default:c((()=>s[0]||(s[0]=[f("Go back home")]))),_:1})])):(p(),l("div",w,[n(t,{blocks:r(R)},null,8,["blocks"])]))])}}});export{k as default};
